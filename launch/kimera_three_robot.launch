<launch>
  <arg name="dataset_name" default="warty"/>
  <arg name="num_robots" default="3"/>
  <arg name="log_gt_data" default="true"/>
  <arg name="mesh_reconstruction" default="false" />

  <!-- Set use_sim_time to true if you use rosbag with clock argument -->
  <!-- Yulun: safe to use system wall-clock time for multi-robot experiment? -->
  <param name="use_sim_time" value="false"/>

  <!-- DPGO params -->
  <param name="/num_robots" type="int" value="$(arg num_robots)" />
  <param name="/dimension" type="int" value="3" />
  <param name="/relaxation_rank" type="int" value="5" />
  <param name="/relative_change_tolerance" type="double" value="1e-4" />
  <param name="/max_iteration_number" type="int" value="100" />

  <include file="$(find kimera_distributed)/launch/kimera_full_stack.launch" pass_all_args="true">
      <arg name="robot_id" value="0" />
  </include>

  <include file="$(find kimera_distributed)/launch/kimera_full_stack.launch" pass_all_args="true">
      <arg name="robot_id" value="1" />
  </include>

  <include file="$(find kimera_distributed)/launch/kimera_full_stack.launch" pass_all_args="true">
      <arg name="robot_id" value="2" />
  </include>

  <!-- DPGO visualization in rviz -->
  <node name="rviz" pkg="rviz" type="rviz" output="screen" args="-d $(find kimera_distributed)/rviz/kimera_two_robot_euroc.rviz"></node>

</launch>
